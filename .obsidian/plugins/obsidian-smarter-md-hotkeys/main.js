/*
THIS IS A GENERATED/BUNDLED FILE BY ESBUILD
if you want to view the source, please visit the github repository of this plugin
*/

var M=Object.create;var L=Object.defineProperty;var ee=Object.getOwnPropertyDescriptor;var te=Object.getOwnPropertyNames;var ne=Object.getPrototypeOf,ie=Object.prototype.hasOwnProperty;var $=c=>L(c,"__esModule",{value:!0});var ae=(c,s)=>{$(c);for(var l in s)L(c,l,{get:s[l],enumerable:!0})},se=(c,s,l)=>{if(s&&typeof s=="object"||typeof s=="function")for(let e of te(s))!ie.call(c,e)&&e!=="default"&&L(c,e,{get:()=>s[e],enumerable:!(l=ee(s,e))||l.enumerable});return c},re=c=>se($(L(c!=null?M(ne(c)):{},"default",c&&c.__esModule&&"default"in c?{get:()=>c.default,enumerable:!0}:{value:c,enumerable:!0})),c);ae(exports,{default:()=>I});var G=!1,k=[{id:"smarter-asterisk-bold",name:"Smarter Bold",before:"**",after:"**"},{id:"smarter-underscore-bold",name:"Smarter Underscore Bold",before:"__",after:"__"},{id:"smarter-asterisk-italics",name:"Smarter Italics",before:"*",after:"*"},{id:"smarter-underscore-italics",name:"Smarter Underscore Italics",before:"_",after:"_"},{id:"smarter-comments",name:"Smarter Comments",before:"%%",after:"%%"},{id:"smarter-html-comments",name:"Smarter HTML Comments",before:"<!--",after:"-->"},{id:"smarter-inline-code",name:"Smarter Code (Inline/Fenced)",before:"`",after:"`"},{id:"smarter-highlight",name:"Smarter Highlight",before:"==",after:"=="},{id:"smarter-bold-highlight",name:"Smarter Bold & Highlight",before:"**==",after:"==**"},{id:"smarter-italics-highlight",name:"Smarter Italics & Highlight",before:"*==",after:"==*"},{id:"smarter-strikethrough",name:"Smarter Strikethrough",before:"~~",after:"~~"},{id:"smarter-wikilink",name:"Smarter Wikilink",before:"[[",after:"]]"},{id:"smarter-wikilink-heading",name:"Smarter Wikilink to Heading",before:"[[##",after:"]]"},{id:"smarter-wikilink-heading",name:"Smarter Embedded Wikilink",before:"![[",after:"]]"},{id:"smarter-md-link",name:"Smarter Markdown Link/Image",before:"[",after:"]()"},{id:"smarter-math",name:"Smarter Mathjax",before:"$",after:"$"},{id:"smarter-callout-label",name:"Smarter Callout Label",before:"> [!",after:`]
> `},{id:"smarter-quotation-marks",name:"Smarter Double Quotation Mark",before:'"',after:'"'},{id:"smarter-single-quotation-marks",name:"Smarter Single Quotation Mark",before:"'",after:"'"},{id:"smarter-round-brackets",name:"Smarter Round Brackets",before:"(",after:")"},{id:"smarter-square-brackets",name:"Smarter Square Brackets",before:"[",after:"]"},{id:"smarter-curly-brackets",name:"Smarter Curly Brackets",before:"{",after:"}"},{id:"smarter-delete",name:"Smarter Delete Text",before:"delete",after:""},{id:"smarter-upper-lower",name:"Smarter Case Switch",before:"case-switch",after:""},{id:"smarter-insert-new-line",name:"Smarter Insert New Line",before:"new-line",after:""},{id:"smarter-toggle-heading",name:"Increase Heading Level",before:"heading",after:"increase"},{id:"smarter-toggle-heading-reverse",name:"Decrease Heading Level",before:"heading",after:"decrease"}],q=[{id:"smarter-delete-current-file",name:"Smarter Delete Current File"},{id:"smarter-copy-path",name:"Smarter Copy Relative/Absolute Path"},{id:"toggle-line-numbers",name:"Toggle Line Numbers"},{id:"toggle-readable-line-length",name:"Toggle Readable Line Length"},{id:"smarter-copy-file-name",name:"Smarter Copy File Name"},{id:"hide-notice",name:"Hide all Notices"}],V=/^((?:[a-z][\w-]+:(?:\/{1,3}|[a-z0-9%])|www\d{0,3}[.]|[a-z0-9.-]+[.][a-z]{2,4}\/)(?:[^\s()<>]+|\(([^\s()<>]+|(\([^\s()<>]+\)))*\))+(?:\(([^\s()<>]+|(\([^\s()<>]+\)))*\)|[^\s`!()[\]{};:'".,<>?«»“”‘’]))$/i,X=['"',"(","[","###### ","##### ","#### ","### ","## ","# ","- [ ] ","- [x] ","- ",">"," ",`
`,"	"],j=['"',")","](","::","]",`
`,"	"," "],z=[["#",""],["[[","]]"],["","]]"],["[[",""],['"','"'],["'","'"],["(",")"],["$",""],["","\u20AC"],["",": ","trim_last_space"],["[","] ","trim_last_space"]],Q=["png","jpg","jpeg","gif","tiff"];var C=re(require("obsidian")),H=(c,s)=>c.line===s.line&&c.ch===s.ch,oe=(c,s)=>H(c.anchor,s.anchor)&&H(c.head,s.head),I=class extends C.Plugin{async onload(){k.forEach(s=>{let{id:l,name:e,before:f,after:b}=s;this.addCommand({id:l,name:e,editorCallback:p=>this.expandAndWrap(f,b,p)})}),q.forEach(s=>{let{id:l,name:e}=s;this.addCommand({id:l,name:e,callback:()=>this.otherCommands(l)})}),console.log("Smarter MD Hotkeys loaded.")}async onunload(){console.log("Smarter MD Hotkeys unloaded.")}async otherCommands(s){let l=this.app.workspace.getActiveFile();if(!!l){if(s==="smarter-delete-current-file"){let e=b=>this.app.commands.executeCommandById(b);if(this.app.vault.getConfig("promptDelete")){new C.Notice('This command requires that the core Obsidian setting "Confirm file deletion" is *disabled*.');return}e("app:delete-file"),e("app:go-back"),e("app:go-back"),new C.Notice('"'+l.name+'" deleted.')}else if(s==="smarter-copy-path"){let e,f=l.path,b=this.app.vault.adapter.basePath+"/"+f,p;f.includes("/")?p=f.replace(/(.*)\/.*/,"$1"):p="/";let g=await navigator.clipboard.readText();g===f?(await navigator.clipboard.writeText(b),e=`Absolute path copied: 
`+b):g===b?(await navigator.clipboard.writeText(p),e=`Parent Folder copied: 
`+p):(await navigator.clipboard.writeText(f),e=`Relative path copied: 
`+f),new C.Notice(e,7e3)}else if(s==="smarter-copy-file-name"){let e=await navigator.clipboard.readText(),f=l.basename;e===f&&(f+="."+l.extension),await navigator.clipboard.writeText(f),new C.Notice(`File Name copied: 
`+f)}else if(s==="toggle-line-numbers"){let e=this.app.vault.getConfig("showLineNumber");this.app.vault.setConfig("showLineNumber",!e)}else if(s==="toggle-readable-line-length"){let e=this.app.vault.getConfig("readableLineLength");this.app.vault.setConfig("readableLineLength",!e)}else if(s==="hide-notice")if((0,C.requireApiVersion)("0.15.0"))for(let f of activeDocument.body.getElementsByClassName("notice"))f.hide();else for(let f of document.body.getElementsByClassName("notice"))f.hide()}}async expandAndWrap(s,l,e){let f=()=>e.posToOffset(e.getCursor("from")),b=()=>e.posToOffset(e.getCursor("to")),p=()=>e.getValue().length,g=t=>(t<0&&(t=0),t>p()&&(t=p()),e.offsetToPos(t));function T(t,n){let i=f(),a=b();if(i-t.length<0||a-n.length>p())return!1;let o=e.getRange(g(i-t.length),g(i)),r=e.getRange(g(a),g(a+n.length));return o===t&&r===n}let R=()=>["`","%%","<!--","$"].includes(s),w=()=>T(s,l);function W(t,n){if(t.line===0||n.line===e.lastLine())return!1;let i=e.getLine(t.line-1),a=e.getLine(n.line+1);return i.startsWith(s)&&a.startsWith(l)}let B=()=>!e.somethingSelected(),A=()=>e.getSelection().includes(`
`);function _(t){if(t<e.lastLine()){let n={line:t,ch:0},i={line:t+1,ch:0};e.replaceRange("",n,i)}else{let n={line:t-1,ch:e.getLine(t).length},i={line:t,ch:e.getLine(t).length};e.replaceRange("",n,i)}}function u(t,n){if(!G)return;let i="";n&&(i=': "'+e.getSelection()+'"'),t.startsWith(`
`)||(t="- "+t),console.log(t+i)}function P(t){if(w()&&B())return{anchor:t,head:t};let n,i;if(s!=="`"){if(e.cm instanceof window.CodeMirror)return e.cm.findWordAt(t);let a=e.cm.state.wordAt(e.posToOffset(t));if(!a)return{anchor:t,head:t};i=g(a.from),n=g(a.to)}if(s==="`"||s==="$"){u("Getting Code under Cursor");let a=e.posToOffset(t),o,r,[m,h,d,D]=[0,0,!1,!1];for(;!/\s/.test(r)&&!D;)r=e.getRange(g(a-(m+1)),g(a-m)),m++,a-(m-1)==0&&(D=!0);for(;!/\s/.test(o)&&!d;)o=e.getRange(g(a+h),g(a+h+1)),h++,a+(h-1)===p()&&(d=!0);i=g(a-(m-1)),n=g(a+(h-1))}return{anchor:i,head:n}}function v(){let t=j,n=X;R()?(n=[s],t=[l]):l&&(n.push(s),t.push(l));let i=e.getSelection(),a=f();u("before trim",!0);let o=!1;for(;!o;){let m=0;n.forEach(h=>{i.startsWith(h)?(i=i.slice(h.length),a+=h.length):m++}),(m===n.length||!i.length)&&(o=!0)}for(o=!1;!o;){let m=0;t.forEach(h=>{i.endsWith(h)?i=i.slice(0,-h.length):m++}),(m===t.length||!i.length)&&(o=!0)}let r=i.match(/ \^\w+$/);r&&(i=i.slice(0,-r[0].length)),e.setSelection(g(a),g(a+i.length)),u("after trim",!0)}function x(){v(),u("before expandSelection",!0);let t=e.getCursor("from"),n=e.getCursor("to"),i=P(t),a=P(n);if(!H(t,n)&&n.ch>0){let r=P({...n,ch:n.ch-1});oe(a,r)||(a=r)}return e.setSelection(i.anchor,a.head),u("after expandSelection",!0),v(),z.forEach(r=>{if(r[0]===s||r[1]===l)return;let m=Boolean(r[2]);T(r[0],r[1])&&(i.anchor.ch-=r[0].length,a.head.ch+=r[1].length,m&&a.head.ch--,e.setSelection(i.anchor,a.head))}),{anchor:t,head:n}}function F(t){return y.forEach(n=>{t.line===n.line&&(t.ch+=n.shift)}),t}function N(t,n,i){let a=e.getSelection(),o=f(),r=b();B()&&i==="multi"||(w()||(["%%","<!--"].includes(s)&&(a=" "+a+" ",r=r+2,S++,E++),e.replaceSelection(s+a+l),y.push({line:t.line,shift:S},{line:n.line,shift:E}),t.ch+=S,n.ch+=S),w()&&(e.setSelection(g(o-S),g(r+E)),e.replaceSelection(a),y.push({line:t.line,shift:-S},{line:n.line,shift:-E}),t.ch-=S,n.ch-=S),i==="single"&&e.setSelection(t,n))}function J(){let t=e.getCursor("from");t.ch=0;let n=e.getCursor("to");if(n.ch=e.getLine(n.line).length,s==="`"?(s="```",l="```",E=3,S=3):s==="$"&&(s="$$",l="$$",E=2,S=2),!W(t,n)&&(e.setSelection(t),e.replaceSelection(s+`
`),n.line++,e.setSelection(n),e.replaceSelection(`
`+l),s==="```")){let i=t;i.ch=3,e.setSelection(i)}W(t,n)&&(_(t.line-1),_(n.line))}async function K(){let t=V,n=(await navigator.clipboard.readText()).trim(),i=s,a=l;if(t.test(n)){a="]("+n+")";let o=n.split(".").pop();Q.includes(o)&&(i="![")}return[i,a]}function Y(){if(T(" ","")){let t=e.getCursor("from"),n=e.getCursor("to");t.ch&&t.ch--,e.setSelection(t,n)}e.replaceSelection("")}function Z(t,n){function i(o){let r=0;for(;o.charAt(r).toLowerCase()===o.charAt(r).toUpperCase()&&(r++,!(r>o.length)););return o.charAt(r).toUpperCase()+o.slice(r+1).toLowerCase()}let a=e.getSelection();a===a.toLowerCase()?a=i(a):a===i(a)?a=a.toUpperCase():a===a.toUpperCase()?a=a.toLowerCase():a=i(a),e.replaceSelection(a),e.setSelection(t,n)}let O=!0;function U(t,n=0,i=0){let a=Boolean(n);n===0&&(n=e.getCursor("head").line,i=e.getCursor("head").ch);let o=e.getLine(n),r=o.match(/^#{1,6}(?= )/),m,h,d;t==="increase"&&r?(m=r[0],m.length<6?(h="#"+o,d=i+1):a===!1?(h=o.slice(7),i>6?d=i-7:d=0):O=!1):t==="increase"&&!r?(h="# "+o,d=i+2):t==="decrease"&&r?(m=r[0],m.length>1?(h=o.slice(1),d=i-1):a===!1?(h=o.slice(2),d=i-2):O=!1):t==="decrease"&&!r&&(h="###### "+o,d=i+7),O&&(e.setLine(n,h),e.setCursor(n,d))}if(u(`
SmarterMD Hotkeys triggered
---------------------------`),s==="new-line"){e.newlineOnly();return}l==="]()"&&([s,l]=await K());let S=s.length,E=l.length,y=[];e.listSelections().forEach(t=>{if(t.anchor=F(t.anchor),t.head=F(t.head),e.setSelection(t.anchor,t.head),v(),s==="delete")u("Smart Delete"),x(),Y();else if(s==="case-switch"){u("Smart Case Switch");let{anchor:n,head:i}=x();Z(n,i)}else if(s==="heading"){u("Smart Toggle Heading");let n=e.getSelection();if(n&&n.includes(`
`)){let{line:i,ch:a}=e.getCursor("from"),{line:o,ch:r}=e.getCursor("to");Array.from({length:o-i+1},(m,h)=>{let d=i+h;e.getLine(i+h).match(/^#{1,6}(?= )/)&&(U(l,d,r),e.setSelection({line:i,ch:a},{line:o,ch:r}))})}else U(l)}else if(A()){if(A()&&R())u("Multiline Wrap"),J();else if(A()&&!R()){let n=f(),i=e.getSelection().split(`
`);u("lines: "+i.length.toString()),i.forEach(a=>{console.log(""),e.setSelection(g(n),g(n+a.length));let{anchor:o,head:r}=x();n+=a.length+1,w()?n-=S+E:n+=S+E,N(o,r,"multi")})}}else{u("single line");let{anchor:n,head:i}=x();N(n,i,"single")}})}};
