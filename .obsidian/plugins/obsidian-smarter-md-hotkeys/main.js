/*
THIS IS A GENERATED/BUNDLED FILE BY ESBUILD
if you want to view the source, please visit the github repository of this plugin
*/

var Z=Object.create;var x=Object.defineProperty;var M=Object.getOwnPropertyDescriptor;var ee=Object.getOwnPropertyNames;var te=Object.getPrototypeOf,ne=Object.prototype.hasOwnProperty;var F=c=>x(c,"__esModule",{value:!0});var ie=(c,r)=>{F(c);for(var o in r)x(c,o,{get:r[o],enumerable:!0})},ae=(c,r,o)=>{if(r&&typeof r=="object"||typeof r=="function")for(let e of ee(r))!ne.call(c,e)&&e!=="default"&&x(c,e,{get:()=>r[e],enumerable:!(o=M(r,e))||o.enumerable});return c},re=c=>ae(F(x(c!=null?Z(te(c)):{},"default",c&&c.__esModule&&"default"in c?{get:()=>c.default,enumerable:!0}:{value:c,enumerable:!0})),c);ie(exports,{default:()=>y});var U=!1,$=[{id:"smarter-asterisk-bold",name:"Smarter Bold",before:"**",after:"**"},{id:"smarter-underscore-bold",name:"Smarter Underscore Bold",before:"__",after:"__"},{id:"smarter-asterisk-italics",name:"Smarter Italics",before:"*",after:"*"},{id:"smarter-underscore-italics",name:"Smarter Underscore Italics",before:"_",after:"_"},{id:"smarter-comments",name:"Smarter Comments",before:"%%",after:"%%"},{id:"smarter-html-comments",name:"Smarter HTML Comments",before:"<!--",after:"-->"},{id:"smarter-inline-code",name:"Smarter Code (Inline/Fenced)",before:"`",after:"`"},{id:"smarter-highlight",name:"Smarter Highlight",before:"==",after:"=="},{id:"smarter-bold-highlight",name:"Smarter Bold & Highlight",before:"**==",after:"==**"},{id:"smarter-italics-highlight",name:"Smarter Italics & Highlight",before:"*==",after:"==*"},{id:"smarter-strikethrough",name:"Smarter Strikethrough",before:"~~",after:"~~"},{id:"smarter-wikilink",name:"Smarter Wikilink",before:"[[",after:"]]"},{id:"smarter-wikilink-heading",name:"Smarter Wikilink to Heading",before:"[[##",after:"]]"},{id:"smarter-wikilink-heading",name:"Smarter Embedded Wikilink",before:"![[",after:"]]"},{id:"smarter-md-link",name:"Smarter Markdown Link/Image",before:"[",after:"]()"},{id:"smarter-math",name:"Smarter Mathjax",before:"$",after:"$"},{id:"smarter-callout-label",name:"Smarter Callout Label",before:"> [!",after:`]
> `},{id:"smarter-quotation-marks",name:"Smarter Double Quotation Mark",before:'"',after:'"'},{id:"smarter-single-quotation-marks",name:"Smarter Single Quotation Mark",before:"'",after:"'"},{id:"smarter-round-brackets",name:"Smarter Round Brackets",before:"(",after:")"},{id:"smarter-square-brackets",name:"Smarter Square Brackets",before:"[",after:"]"},{id:"smarter-curly-brackets",name:"Smarter Curly Brackets",before:"{",after:"}"},{id:"smarter-delete",name:"Smarter Delete Text",before:"delete",after:""},{id:"smarter-upper-lower",name:"Smarter Case Switch",before:"case-switch",after:""},{id:"smarter-insert-new-line",name:"Smarter Insert New Line",before:"new-line",after:""},{id:"smarter-toggle-heading",name:"Increase Heading Level",before:"heading",after:"increase"},{id:"smarter-toggle-heading-reverse",name:"Decrease Heading Level",before:"heading",after:"decrease"}],G=[{id:"smarter-delete-current-file",name:"Smarter Delete Current File"},{id:"smarter-copy-path",name:"Smarter Copy Relative/Absolute Path"},{id:"toggle-line-numbers",name:"Toggle Line Numbers"},{id:"toggle-readable-line-length",name:"Toggle Readable Line Length"},{id:"smarter-copy-file-name",name:"Smarter Copy File Name"},{id:"hide-notice",name:"Hide all Notices"}],k=/^((?:[a-z][\w-]+:(?:\/{1,3}|[a-z0-9%])|www\d{0,3}[.]|[a-z0-9.-]+[.][a-z]{2,4}\/)(?:[^\s()<>]+|\(([^\s()<>]+|(\([^\s()<>]+\)))*\))+(?:\(([^\s()<>]+|(\([^\s()<>]+\)))*\)|[^\s`!()[\]{};:'".,<>?«»“”‘’]))$/i,q=['"',"(","[","###### ","##### ","#### ","### ","## ","# ","- [ ] ","- [x] ","- ",">"," ",`
`,"	"],V=['"',")","](","::","]",`
`,"	"," "],X=[["#",""],["[[","]]"],["","]]"],["[[",""],['"','"'],["'","'"],["(",")"],["$",""],["","\u20AC"],["",": ","trim_last_space"],["[","] ","trim_last_space"]],j=["png","jpg","jpeg","gif","tiff"];var p=re(require("obsidian")),O=(c,r)=>c.line===r.line&&c.ch===r.ch,se=(c,r)=>O(c.anchor,r.anchor)&&O(c.head,r.head),y=class extends p.Plugin{async onload(){$.forEach(r=>{let{id:o,name:e,before:f,after:b}=r;this.addCommand({id:o,name:e,editorCallback:S=>this.expandAndWrap(f,b,S)})}),G.forEach(r=>{let{id:o,name:e}=r;this.addCommand({id:o,name:e,callback:()=>this.otherCommands(o)})}),console.log("Smarter MD Hotkeys loaded.")}async onunload(){console.log("Smarter MD Hotkeys unloaded.")}async otherCommands(r){let o=this.app.workspace.getActiveFile();if(!!o){if(r==="smarter-delete-current-file"){let e=b=>this.app.commands.executeCommandById(b);if(this.app.vault.getConfig("promptDelete")){new p.Notice('This command requires that the core Obsidian setting "Confirm file deletion" is *disabled*.');return}e("app:delete-file"),e("app:go-back"),e("app:go-back"),new p.Notice('"'+o.name+'" deleted.')}else if(r==="smarter-copy-path"){let e,f=o.path,b=this.app.vault.adapter.basePath+"/"+f,S;f.includes("/")?S=f.replace(/(.*)\/.*/,"$1"):S="/";let h=await navigator.clipboard.readText();h===f?(await navigator.clipboard.writeText(b),e=`Absolute path copied: 
`+b):h===b?(await navigator.clipboard.writeText(S),e=`Parent Folder copied: 
`+S):(await navigator.clipboard.writeText(f),e=`Relative path copied: 
`+f),new p.Notice(e,7e3)}else if(r==="smarter-copy-file-name"){let e=await navigator.clipboard.readText(),f=o.basename;e===f&&(f+="."+o.extension),await navigator.clipboard.writeText(f),new p.Notice(`File Name copied: 
`+f)}else if(r==="toggle-line-numbers"){let e=this.app.vault.getConfig("showLineNumber");this.app.vault.setConfig("showLineNumber",!e)}else if(r==="toggle-readable-line-length"){let e=this.app.vault.getConfig("readableLineLength");this.app.vault.setConfig("readableLineLength",!e)}else if(r==="hide-notice")if((0,p.requireApiVersion)("0.15.0"))for(let f of activeDocument.body.getElementsByClassName("notice"))f.hide();else for(let f of document.body.getElementsByClassName("notice"))f.hide()}}async expandAndWrap(r,o,e){let f=()=>e.posToOffset(e.getCursor("from")),b=()=>e.posToOffset(e.getCursor("to")),S=()=>e.getValue().length,h=t=>(t<0&&(t=0),t>S()&&(t=S()),e.offsetToPos(t));function L(t,n){let a=f(),i=b();if(a-t.length<0||i-n.length>S())return!1;let l=e.getRange(h(a-t.length),h(a)),s=e.getRange(h(i),h(i+n.length));return l===t&&s===n}let T=()=>["`","%%","<!--","$"].includes(r),C=()=>L(r,o);function D(t,n){if(t.line===0||n.line===e.lastLine())return!1;let a=e.getLine(t.line-1),i=e.getLine(n.line+1);return a.startsWith(r)&&i.startsWith(o)}let H=()=>!e.somethingSelected(),R=()=>e.getSelection().includes(`
`);function N(t){if(t<e.lastLine()){let n={line:t,ch:0},a={line:t+1,ch:0};e.replaceRange("",n,a)}else{let n={line:t-1,ch:e.getLine(t).length},a={line:t,ch:e.getLine(t).length};e.replaceRange("",n,a)}}function d(t,n){if(!U)return;let a="";n&&(a=': "'+e.getSelection()+'"'),t.startsWith(`
`)||(t="- "+t),console.log(t+a)}function A(t){if(C()&&H())return{anchor:t,head:t};let n,a;if(r!=="`"){if(e.cm instanceof window.CodeMirror)return e.cm.findWordAt(t);let i=e.cm.state.wordAt(e.posToOffset(t));if(!i)return{anchor:t,head:t};a=h(i.from),n=h(i.to)}if(r==="`"||r==="$"){d("Getting Code under Cursor");let i=e.posToOffset(t),l,s,[m,g,B,_]=[0,0,!1,!1];for(;!/\s/.test(s)&&!_;)s=e.getRange(h(i-(m+1)),h(i-m)),m++,i-(m-1)==0&&(_=!0);for(;!/\s/.test(l)&&!B;)l=e.getRange(h(i+g),h(i+g+1)),g++,i+(g-1)===S()&&(B=!0);a=h(i-(m-1)),n=h(i+(g-1))}return{anchor:a,head:n}}function P(){let t=V,n=q;T()?(n=[r],t=[o]):o&&(n.push(r),t.push(o));let a=e.getSelection(),i=f();d("before trim",!0);let l=!1;for(;!l;){let m=0;n.forEach(g=>{a.startsWith(g)?(a=a.slice(g.length),i+=g.length):m++}),(m===n.length||!a.length)&&(l=!0)}for(l=!1;!l;){let m=0;t.forEach(g=>{a.endsWith(g)?a=a.slice(0,-g.length):m++}),(m===t.length||!a.length)&&(l=!0)}let s=a.match(/ \^\w+$/);s&&(a=a.slice(0,-s[0].length)),e.setSelection(h(i),h(i+a.length)),d("after trim",!0)}function w(){P(),d("before expandSelection",!0);let t=e.getCursor("from"),n=e.getCursor("to"),a=A(t),i=A(n);if(!O(t,n)&&n.ch>0){let s=A({...n,ch:n.ch-1});se(i,s)||(i=s)}return e.setSelection(a.anchor,i.head),d("after expandSelection",!0),P(),X.forEach(s=>{if(s[0]===r||s[1]===o)return;let m=Boolean(s[2]);L(s[0],s[1])&&(a.anchor.ch-=s[0].length,i.head.ch+=s[1].length,m&&i.head.ch--,e.setSelection(a.anchor,i.head))}),{anchor:t,head:n}}function W(t){return v.forEach(n=>{t.line===n.line&&(t.ch+=n.shift)}),t}function I(t,n,a){let i=e.getSelection(),l=f(),s=b();H()&&a==="multi"||(C()||(["%%","<!--"].includes(r)&&(i=" "+i+" ",s=s+2,u++,E++),e.replaceSelection(r+i+o),v.push({line:t.line,shift:u},{line:n.line,shift:E}),t.ch+=u,n.ch+=u),C()&&(e.setSelection(h(l-u),h(s+E)),e.replaceSelection(i),v.push({line:t.line,shift:-u},{line:n.line,shift:-E}),t.ch-=u,n.ch-=u),a==="single"&&e.setSelection(t,n))}function z(){let t=e.getCursor("from");t.ch=0;let n=e.getCursor("to");if(n.ch=e.getLine(n.line).length,r==="`"?(r="```",o="```",E=3,u=3):r==="$"&&(r="$$",o="$$",E=2,u=2),!D(t,n)&&(e.setSelection(t),e.replaceSelection(r+`
`),n.line++,e.setSelection(n),e.replaceSelection(`
`+o),r==="```")){let a=t;a.ch=3,e.setSelection(a)}D(t,n)&&(N(t.line-1),N(n.line))}async function Q(){let t=k,n=(await navigator.clipboard.readText()).trim(),a=r,i=o;if(t.test(n)){i="]("+n+")";let l=n.split(".").pop();j.includes(l)&&(a="![")}return[a,i]}function J(){if(L(" ","")){let t=e.getCursor("from"),n=e.getCursor("to");t.ch&&t.ch--,e.setSelection(t,n)}e.replaceSelection("")}function K(t,n){function a(l){let s=0;for(;l.charAt(s).toLowerCase()===l.charAt(s).toUpperCase()&&(s++,!(s>l.length)););return l.charAt(s).toUpperCase()+l.slice(s+1).toLowerCase()}let i=e.getSelection();i===i.toLowerCase()?i=a(i):i===a(i)?i=i.toUpperCase():i===i.toUpperCase()?i=i.toLowerCase():i=a(i),e.replaceSelection(i),e.setSelection(t,n)}function Y(t){let{line:n,ch:a}=e.getCursor("head"),i=e.getLine(n),l=i.match(/^#{1,6}(?= )/),s,m,g;t==="increase"&&l?(s=l[0],s.length<6?(m="#"+i,g=a+1):(m=i.slice(7),a>6?g=a-7:g=0)):t==="increase"&&!l?(m="# "+i,g=a+2):t==="decrease"&&l?(s=l[0],s.length>1?(m=i.slice(1),g=a-1):(m=i.slice(2),g=a-2)):t==="decrease"&&!l&&(m="###### "+i,g=a+7),e.setLine(n,m),e.setCursor(n,g)}if(d(`
SmarterMD Hotkeys triggered
---------------------------`),r==="new-line"){e.newlineOnly();return}o==="]()"&&([r,o]=await Q());let u=r.length,E=o.length,v=[];e.listSelections().forEach(t=>{if(t.anchor=W(t.anchor),t.head=W(t.head),e.setSelection(t.anchor,t.head),P(),r==="delete")d("Smart Delete"),w(),J();else if(r==="case-switch"){d("Smart Case Switch");let{anchor:n,head:a}=w();K(n,a)}else if(r==="heading")d("Smart Toggle Heading"),Y(o);else if(R()){if(R()&&T())d("Multiline Wrap"),z();else if(R()&&!T()){let n=f(),a=e.getSelection().split(`
`);d("lines: "+a.length.toString()),a.forEach(i=>{console.log(""),e.setSelection(h(n),h(n+i.length));let{anchor:l,head:s}=w();n+=i.length+1,C()?n-=u+E:n+=u+E,I(l,s,"multi")})}}else{d("single line");let{anchor:n,head:a}=w();I(n,a,"single")}})}};
